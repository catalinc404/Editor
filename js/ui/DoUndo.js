////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
function DoUndoManager( eventDispatcher )
{
    this.eventDispatcher = eventDispatcher;

    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    this.operations = [];
    this.currentOperationIndex = -1;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DoUndoManager.prototype = Object.assign( Object.create( Object.prototype ), 
{
    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    constructor: DoUndoManager
} );

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DoUndoManager.prototype.AddCommand = function( command )
{
    this.operations.splice( this.currentOperationIndex );
    this.operations.push( command );
    this.currentOperationIndex = this.operations.length - 1;
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DoUndoManager.prototype.Do = function()
{
    if ( this.currentOperationIndex < this.operations.length )
    {
        this.operations[ this.currentOperationIndex ].Do();
        this.currentOperationIndex++;
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DoUndoManager.prototype.Undo = function()
{
    if ( (this.currentOperationIndex > 0) && (this.currentOperationIndex <= this.operations.length) )
    {
        this.currentOperationIndex--;
        this.operations[ this.currentOperationIndex ].Undo();
    }
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
DoUndoManager.prototype.Redo = function()
{
    if ( this.currentOperationIndex < this.operations.length )
    {
        this.operations[ this.currentOperationIndex ].Redo();
        this.currentOperationIndex++;
    }
}

